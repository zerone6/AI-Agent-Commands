# AGENTS Rules

AI 코딩 어시스턴트를 위한 프로젝트 규칙 문서

---

## 1. 기본 원칙

### 1.1 언어 규칙

| 상황 | 언어 |
|------|------|
| 기본 커뮤니케이션 | 한글 |
| 기술 용어 | 영어/외국어 원문 유지 |
| 코드 주석/문서 | 영어 (다국적 팀 협업 고려) |
| 커밋 메시지 | 영어 |

### 1.2 파일 작성 규칙

- 이모지 사용 금지
- 인코딩: UTF-8
- 개행: LF (Unix 스타일)

### 1.3 AI 행동 원칙

| 원칙 | 설명 |
|------|------|
| 사전 확인 | 작업 전 현재 상태 파악 (`git status`, 구조 확인) |
| 승인 요청 | 대규모 변경, 파일 삭제, 의존성 추가 전 사용자 확인 |
| 실패 보고 | 에러 발생 시 원인 분석 후 보고 (자동 재시도 금지) |
| 명확화 | 불확실한 요구사항은 질문으로 확인 |
| 롤백 | 직접 롤백하지 않고 방법만 보고 |

---

## 2. 커밋 로그 작성

### 2.1 트리거

사용자가 커밋 로그 작성을 요청할 때

### 2.2 작성 절차

1. `git diff --staged` 및 변경 파일 내용 검토
2. 아래 경로에 커밋 로그 파일 작성

### 2.3 파일 경로

```
/docs/taskLog/commitMMDDNN.md
```

| 요소 | 설명 |
|------|------|
| MMDD | 월일 (Asia/Tokyo 기준) |
| NN | 당일 순번 (01부터) |
| 예시 | `commit121401.md` |

> 폴더가 없으면 생성한다.

### 2.4 로그 형식

```
<type>: <subject>

<body>

Changes:
- <change 1>
- <change 2>
```

**Type 종류:** `feat`, `fix`, `refactor`, `docs`, `style`, `test`, `chore`

---

## 3. 작업 명령서(Order) 작성

### 3.1 트리거

사용자가 특정 업무에 대한 작업 명령서 작성을 요청할 때

**예시:**
> "계산기 화면을 그리기 위한 작업 명령서를 작성해줘."

### 3.2 파일 경로

```
/docs/current_sprint/orderMMDDNN.md
```

> 폴더가 없으면 생성한다.

### 3.3 작성 원칙

| 원칙 | 설명 |
|------|------|
| 추상화 | 구현 코드 없이 인터페이스/시그니처 수준으로 기술 |
| 구조 참조 | `/docs/structure` 참고, 중복 제거 및 적절한 위치에 배치 |
| TODO 반영 | `TODO.md` 확인, 관련 항목 order에 포함 |

### 3.4 실행 프로세스

```
작성 → 사용자 리뷰 → 승인 → 실행
```

AI는 사용자 승인 없이 작업을 실행하지 않는다.

### 3.5 문서 구조

```markdown
## 1. 개요
- 날짜: YYYY-MM-DD (Asia/Tokyo)
- Commit: 현재 main 브랜치 commit ID
- 오더: (사용자 프롬프트 원문)
- 요약: (핵심 3줄 이내)

## 2. 목표 및 배경
(상세 설명)

## 3. 문제점 분석 (해당 시)
오더에 심각한 문제가 있고 대안이 존재하는 경우:
→ 여기까지만 작성하고 대안 제시 후 마무리

## 4. 변경 범위

### 4.1 산출물
- 산출물 목록

### 4.2 변경 파일
| 상태 | 경로 | 설명 |
|------|------|------|
| A | /path/to/new.ts | 신규 컴포넌트 |
| M | /path/to/edit.ts | 함수 추가 |
| D | /path/to/old.ts | 미사용 파일 삭제 |

## 5. 구현 계획
(설계 의도 및 작업 단계)

### Phase 1: [단계명]
- [ ] 작업 항목
- [ ] 테스트 확인

### Phase 2: [단계명]
...

## 6. 테스트

### 자동 테스트 (AI)
| 항목 | 방법 | 예상 결과 |
|------|------|----------|
| ... | ... | ... |

### 수동 테스트 (사용자)
| 항목 | 방법 | 예상 결과 |
|------|------|----------|
| ... | ... | ... |

## 7. 주의사항
- 리스크: ...
- 롤백 방법: ...
- Known Issues: ...
```

---

## 4. 에러 처리 및 보고

### 4.1 에러 발생 시 보고 형식

```markdown
## 에러 보고

### 발생 상황
- 명령어: `실행한 명령어`
- 시점: 어떤 작업 중이었는지

### 에러 내용
(에러 메시지 전문)

### 원인 분석
(추정 원인)

### 해결 방안
1. 방안 A: ...
2. 방안 B: ...

### 권장 조치
(AI 권장 사항)
```

### 4.2 롤백 필요 시

AI는 직접 롤백하지 않고 아래 내용을 보고한다:

- 롤백이 필요한 이유
- 롤백 명령어/절차
- 영향 범위

---

## 5. 보안 규칙

| 항목 | 규칙 |
|------|------|
| API 키/시크릿 | 코드에 하드코딩 금지, 환경변수 사용 |
| 민감 정보 | 로그/커밋에 포함 금지 |
| .env 파일 | .gitignore에 포함 확인 |

---

## 6. 참조 경로

| 용도 | 경로 |
|------|------|
| 커밋 로그 | `/docs/taskLog/` |
| 작업 명령서 | `/docs/current_sprint/` |
| 프로젝트 구조 | `/docs/structure/` |
| TODO 목록 | `TODO.md` |

---

## 7. 우선순위 정의

작업 요청 시 우선순위 표기에 사용:

| 레벨 | 의미 | 대응 시점 |
|------|------|----------|
| P0 | 긴급 (프로덕션 장애) | 즉시 |
| P1 | 높음 (기능 버그) | 당일 |
| P2 | 보통 (개선) | 이번 스프린트 |
| P3 | 낮음 (희망사항) | 백로그 |
