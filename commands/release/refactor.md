---
agent: agent
description: "코드 품질 개선을 위한 리팩토링 수행"
---

릴리즈 전 또는 Sprint 종료 전 코드 품질을 개선한다.

## 트리거

- 사용자가 리팩토링을 요청할 때
- Sprint 종료 전 코드 정리가 필요할 때
- 릴리즈 준비 단계

## 리팩토링 체크리스트

### 1. 미사용 코드 제거

| 대상 | 기준 |
|------|------|
| 미사용 import | IDE/lint 경고 대상 |
| 미사용 변수/함수 | 호출되지 않는 코드 |
| 주석 처리된 코드 | 전체 삭제 (Git 히스토리에 존재) |
| TODO/FIXME 주석 | TODO.md로 이동 후 삭제 |
| 미래용 코드 | "나중에 사용" 목적의 코드 삭제 |

### 2. 중복 코드 제거

| 대상 | 조치 |
|------|------|
| 동일 로직 반복 | 공통 함수/훅으로 추출 |
| 유사 컴포넌트 | Props로 분기하거나 합성 컴포넌트로 통합 |
| 상수 중복 | constants 파일로 통합 |
| 타입 중복 | types 파일로 통합 |

### 3. 파일 크기 최적화

| 기준 | 조치 |
|------|------|
| 300줄 이상 | 분리 검토 대상 |
| 500줄 이상 | 반드시 분리 |

분리 방법:
- 컴포넌트: UI / 로직(훅) / 스타일 분리
- 유틸: 기능별 파일 분리
- API: 도메인별 파일 분리

### 4. 폴더 구조 정리

STRUCTURE 문서와 비교하여:
- 잘못된 위치의 파일 이동
- 일관성 없는 네이밍 수정
- 빈 폴더 삭제

### 5. 코드 품질

| 항목 | 체크 |
|------|------|
| any 타입 | 구체적 타입으로 교체 |
| console.log | 삭제 또는 적절한 로거로 교체 |
| 하드코딩 값 | 상수/환경변수로 분리 |
| 에러 처리 | try-catch 누락 확인 |
| 매직 넘버 | 의미 있는 상수로 교체 |

## 실행 순서

### Phase 1: 분석

1. STRUCTURE 문서 확인
2. 전체 파일 목록 및 크기 확인
3. lint/TypeScript 에러 확인
4. 리팩토링 대상 목록 작성

### Phase 2: 미사용 코드 제거

1. 미사용 import 제거
2. 미사용 변수/함수 제거
3. 주석 처리된 코드 삭제
4. 테스트 실행

### Phase 3: 중복 제거

1. 중복 로직 식별
2. 공통 모듈 추출
3. 기존 코드에서 공통 모듈 사용으로 교체
4. 테스트 실행

### Phase 4: 파일 분리

1. 대용량 파일 식별 (300줄+)
2. 분리 계획 수립
3. 파일 분리 실행
4. import 경로 수정
5. 테스트 실행

### Phase 5: 구조 정리

1. 파일 위치 검토
2. 필요시 파일 이동
3. STRUCTURE 문서 업데이트
4. 최종 테스트

## 결과물

리팩토링 완료 후 생성:

```
/docs/current_sprint/REFACTORING_MMDDNN.md
```

내용:
- 제거된 파일/코드 목록
- 분리된 파일 목록
- 이동된 파일 목록
- 추출된 공통 모듈 목록

## 주의사항

- 기능 변경 없이 구조만 변경
- Phase마다 테스트 통과 확인
- 대규모 변경 전 사용자 승인
- 커밋 메시지: `refactor: <변경 내용>`